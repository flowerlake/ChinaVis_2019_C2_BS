// Using Leaflet for creating the map and adding controls for interacting with the map

//
//--- adding base maps ---
//

//creating the map; defining the location in the center of the map (geographic coords) and the zoom level. These are properties of the leaflet map object
//the map window has been given the id 'map' in the .html file
var map = L.map('map', {
    center: [30.50488, -120.07026],//[47.8, 13.05],
    zoom: 12
});//地图中心

// alternatively the setView method could be used for placing the map in the window
//var map = L.map('map').setView([47.5, 13.05], 8);
L.control.scale().addTo(map);

//adding two base maps 


var toner = L.tileLayer('http://tile.stamen.com/toner/{z}/{x}/{y}.png', {attribution: 'Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>'});
// toner.addTo(map);

var OpenStreetMap_Mapnik = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, Made by Kaiyue Zang'
});
OpenStreetMap_Mapnik.addTo(map);

// var hillshade = L.tileLayer('http://c.tiles.wmflabs.org/hillshading/{z}/{x}/{y}.png').addTo(map);

// for using the two base maps in the layer control, I defined a baseMaps variable
var baseMaps = {
    "OSM": OpenStreetMap_Mapnik,
    // "Toner": toner,
    // "Hillshade": hillshade
}


/*we use ready-made map tile layers from online providers (idealy free tile layers) as base map.
for further examples have a look at: 
https://leaflet-extras.github.io/leaflet-providers/preview/

You can add a new variable for a base map following the structure of the examples above using the respective link.
*/


//
//---- Adding GeoJSON point features - to marker object
//


var school = L.geoJson(schoolJson, {
    pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {icon: schoolStyle});
    }
    ,
    onEachFeature: function (feature, marker) {
        marker.bindPopup("This is a school building: " + feature.properties.TITLE + " at location: " + marker.getLatLng());
    }
});
school.addTo(map);


var home = L.geoJson(homeJson, {
    pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {icon: homeStyle});
    }
    ,
    onEachFeature: function (feature, marker) {
        marker.bindPopup("This is our house: " + feature.properties.TITLE + " at location: " + marker.getLatLng());
    }
});
home.addTo(map);


var bike = L.geoJson(bikeJson, {
    pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {icon: bikeStyle});
    }
    ,
    onEachFeature: function (feature, marker) {
        marker.bindPopup("This is a bike store: " + feature.properties.TITLE + " at location: " + marker.getLatLng());
    }
});
bike.addTo(map);

var airport = L.geoJson(airportJson, {
    pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {icon: airportStyle});
    }
    ,
    onEachFeature: function (feature, marker) {
        marker.bindPopup("This is airport: " + feature.properties.TITLE + " at location: " + marker.getLatLng());
    }
});
airport.addTo(map);

var hospital = L.geoJson(hospitalJson, {
    pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {icon: hospitalStyle});
    }
    ,
    onEachFeature: function (feature, marker) {
        marker.bindPopup("This is a hospital: " + feature.properties.TITLE + " at location: " + marker.getLatLng());
    }
});
hospital.addTo(map);

var IKEA = L.geoJson(IKEAJson, {
    pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {icon: IKEAStyle});
    }
    ,
    onEachFeature: function (feature, marker) {
        marker.bindPopup("This is " + feature.properties.TITLE + " at location: " + marker.getLatLng());
    }
});
IKEA.addTo(map);

var shopping = L.geoJson(shoppingJson, {
    pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {icon: shoppingStyle});
    }
    ,
    onEachFeature: function (feature, marker) {
        marker.bindPopup("This is a shopping mall: " + feature.properties.TITLE + " at location: " + marker.getLatLng());
    }
});
shopping.addTo(map);

var market = L.geoJson(marketJson, {
    pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {icon: marketStyle});
    }
    ,
    onEachFeature: function (feature, marker) {
        marker.bindPopup("This is a supermarket: " + feature.properties.TITLE + " at location: " + marker.getLatLng());
    }
});
market.addTo(map);

var train = L.geoJson(trainJson, {
    pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {icon: trainStyle});
    }
    ,
    onEachFeature: function (feature, marker) {
        marker.bindPopup("This is a train station: " + feature.properties.TITLE + " at location: " + marker.getLatLng());
    }
});
train.addTo(map);

//
//---- adding an event to the map
//

//when you click in the map, an alert with the latitude and longitude coordinates of the click location is shown
// e is the event object that is created on mouse click

/*
map.addEventListener('click', function(e) {
    alert(e.latlng);
});

*/

/*
//the same functionality can be realized with reference to the function onClick

//definition of the function onClick
function onClick(evt){
	alert(evt.latlng);
}

map.addEventListener('click', onClick);

//short version (on is an alias for addEventListener):
//map.on('click', onClick);

*/


//
//---- Adding GeoJSON features and interactivity互动
//我添加的mapboxapi得到的数据
let testJson = {
    "features": [{
        "properties": {
            "fillOpacity": 0.33,
            "color": "#bf4040",
            "fill": "#bf4040",
            "fillColor": "#bf4040",
            "contour": 10,
            "opacity": 0.33,
            "fill-opacity": 0.33
        }, "type": "Feature", "geometry": {
            "coordinates": [[[104.067268, 30.599884], [104.065262, 30.600512], [104.064819, 30.591881], [104.064255, 30.591068], [104.063477, 30.590878], [104.064522, 30.58988], [104.064262, 30.589403], [104.063255, 30.58927], [104.062744, 30.587879], [104.064262, 30.587341], [104.064552, 30.584589], [104.064255, 30.584108], [104.063263, 30.58506], [104.062759, 30.583382], [104.062263, 30.583086], [104.061417, 30.583031], [104.061264, 30.584044], [104.061104, 30.58288], [104.06192, 30.581882], [104.061264, 30.581161], [104.059227, 30.580919], [104.05764, 30.581259], [104.057259, 30.582928], [104.056931, 30.581215], [104.056396, 30.580881], [104.057045, 30.579666], [104.05687, 30.578276], [104.053856, 30.577881], [104.056252, 30.57769], [104.057198, 30.576881], [104.057106, 30.575037], [104.056381, 30.573881], [104.05687, 30.571491], [104.057259, 30.571299], [104.05748, 30.572878], [104.058273, 30.57353], [104.062553, 30.573166], [104.062904, 30.568243], [104.06147, 30.567883], [104.065262, 30.567699], [104.065437, 30.563707], [104.054939, 30.563551], [104.054688, 30.564878], [104.055618, 30.56588], [104.055389, 30.568748], [104.056496, 30.569878], [104.05629, 30.570911], [104.056099, 30.570049], [104.055153, 30.569878], [104.054947, 30.566879], [104.053894, 30.565878], [104.053612, 30.563536], [104.049484, 30.56311], [104.049263, 30.563541], [104.04821, 30.56288], [104.053352, 30.561966], [104.053261, 30.561348], [104.052574, 30.560879], [104.053261, 30.560759], [104.053658, 30.559879], [104.052559, 30.558578], [104.051933, 30.558554], [104.051605, 30.560217], [104.05027, 30.56118], [104.049294, 30.560881], [104.04985, 30.55888], [104.049271, 30.558264], [104.046501, 30.558113], [104.046265, 30.558605], [104.046074, 30.558071], [104.045265, 30.557903], [104.044525, 30.558134], [104.044266, 30.559368], [104.043602, 30.554541], [104.041916, 30.554533], [104.04126, 30.555063], [104.040947, 30.554188], [104.039391, 30.553881], [104.042732, 30.553345], [104.043396, 30.550018], [104.042259, 30.549051], [104.041374, 30.548994], [104.04126, 30.549339], [104.040794, 30.54888], [104.041145, 30.548763], [104.040855, 30.547283], [104.039238, 30.546883], [104.040886, 30.546505], [104.041183, 30.545879], [104.040886, 30.545256], [104.039482, 30.545105], [104.039261, 30.545452], [104.038788, 30.54488], [104.039757, 30.544369], [104.039879, 30.542883], [104.040649, 30.542263], [104.040611, 30.540535], [104.036812, 30.54043], [104.036263, 30.543226], [104.035736, 30.540411], [104.032463, 30.539881], [104.035263, 30.539621], [104.035866, 30.538877], [104.035759, 30.535881], [104.036713, 30.534878], [104.036491, 30.528662], [104.032005, 30.528612], [104.030968, 30.529585], [104.030769, 30.53088], [104.031815, 30.532331], [104.033325, 30.53282], [104.033295, 30.533907], [104.033043, 30.53311], [104.031265, 30.53319], [104.030663, 30.532475], [104.0299, 30.53252], [104.029518, 30.534136], [104.028587, 30.53488], [104.028419, 30.536043], [104.027649, 30.536264], [104.02726, 30.537039], [104.026367, 30.536989], [104.02626, 30.537443], [104.026222, 30.536844], [104.02697, 30.536589], [104.027138, 30.535759], [104.027763, 30.535376], [104.027901, 30.533882], [104.028671, 30.533285], [104.028954, 30.531565], [104.029747, 30.53088], [104.029556, 30.528589], [104.028259, 30.527414], [104.026924, 30.527216], [104.02626, 30.526346], [104.025261, 30.527277], [104.020432, 30.526882], [104.024261, 30.526516], [104.025826, 30.524881], [104.025688, 30.522881], [104.024765, 30.521379], [104.024216, 30.518879], [104.023262, 30.518522], [104.020264, 30.518471], [104.019264, 30.519442], [104.015907, 30.519529], [104.014633, 30.52088], [104.014259, 30.523073], [104.013885, 30.52088], [104.01326, 30.520287], [104.011261, 30.520206], [104.010262, 30.521133], [104.006561, 30.520882], [104.00927, 30.520657], [104.010262, 30.519611], [104.013672, 30.519293], [104.014259, 30.517302], [104.014809, 30.51833], [104.018265, 30.518333], [104.019272, 30.517311], [104.023415, 30.517027], [104.022659, 30.515881], [104.02269, 30.513882], [104.022263, 30.513411], [104.021263, 30.514359], [104.017265, 30.514217], [104.016258, 30.515137], [104.015045, 30.514881], [104.016251, 30.513607], [104.019272, 30.513453], [104.019974, 30.512585], [104.021263, 30.512377], [104.021759, 30.511879], [104.021683, 30.510458], [104.020981, 30.51016], [104.020691, 30.509455], [104.017448, 30.508881], [104.019264, 30.508675], [104.019958, 30.507881], [104.019707, 30.506435], [104.018875, 30.505274], [104.018608, 30.502541], [104.017532, 30.500612], [104.016968, 30.500574], [104.016258, 30.501398], [104.012848, 30.501463], [104.012413, 30.503025], [104.011536, 30.503151], [104.011253, 30.504393], [104.010033, 30.501112], [104.009132, 30.501007], [104.00872, 30.499424], [104.008026, 30.499111], [104.007431, 30.496717], [104.006264, 30.497255], [104.002441, 30.497061], [104.002296, 30.497915], [104.001472, 30.497881], [104.002159, 30.497778], [104.002205, 30.496824], [104.00296, 30.496572], [104.003166, 30.494982], [104.002838, 30.494879], [104.003304, 30.494846], [104.003487, 30.495668], [104.006264, 30.495487], [104.006737, 30.494881], [104.006699, 30.493879], [104.005676, 30.492878], [104.005646, 30.49188], [104.004623, 30.490881], [104.004265, 30.488565], [104.002266, 30.48855], [104.001259, 30.489536], [103.999008, 30.489618], [103.998276, 30.493887], [103.997719, 30.49288], [103.997917, 30.491882], [103.997261, 30.491329], [103.996414, 30.49188], [103.996277, 30.492893], [103.994072, 30.493073], [103.993782, 30.492363], [103.992874, 30.492487], [103.992882, 30.493263], [103.993614, 30.493532], [103.993828, 30.495317], [103.994576, 30.49588], [103.994522, 30.497137], [103.993042, 30.496096], [103.992661, 30.49448], [103.990265, 30.492378], [103.989265, 30.493341], [103.987869, 30.493494], [103.987259, 30.49428], [103.985825, 30.494446], [103.98526, 30.495195], [103.983536, 30.49515], [103.982262, 30.496201], [103.980469, 30.496084], [103.980316, 30.496881], [103.978996, 30.49688], [103.980171, 30.49679], [103.980263, 30.495779], [103.98185, 30.495464], [103.982262, 30.494619], [103.984261, 30.494221], [103.985741, 30.493357], [103.986511, 30.492128], [103.98735, 30.491879], [103.987518, 30.490128], [103.988075, 30.489693], [103.988106, 30.487722], [103.989075, 30.486691], [103.989258, 30.485691], [103.991264, 30.490051], [103.99427, 30.487026], [103.994431, 30.487881], [103.995262, 30.488432], [103.99826, 30.488249], [103.99926, 30.487314], [104.001488, 30.487114], [104.001678, 30.486462], [104.00071, 30.485878], [104.000809, 30.48443], [104.001579, 30.48456], [104.001839, 30.486298], [104.002655, 30.486269], [104.002678, 30.483881], [104.001717, 30.48288], [104.001785, 30.480402], [104.002602, 30.480547], [104.002792, 30.48188], [104.00383, 30.482878], [104.003876, 30.48488], [104.004692, 30.485456], [104.005043, 30.487091], [104.015427, 30.487047], [104.01545, 30.485691], [104.014542, 30.484882], [104.01458, 30.48188], [104.013603, 30.480881], [104.013611, 30.47888], [104.012634, 30.47788], [104.012535, 30.47661], [104.011261, 30.475426], [104.010254, 30.476395], [104.002525, 30.476143], [104.002319, 30.476944], [104.00132, 30.476933], [104.001694, 30.477451], [104.001732, 30.480354], [104.000961, 30.480179], [104.000687, 30.478456], [103.998901, 30.47788], [103.997475, 30.476881], [103.998947, 30.476568], [103.999252, 30.475277], [103.999641, 30.476505], [104.001228, 30.476852], [104.001701, 30.47588], [104.004272, 30.475611], [104.005035, 30.474878], [104.005264, 30.473328], [104.005493, 30.474878], [104.006264, 30.475502], [104.00869, 30.4753], [104.010582, 30.474195], [104.010765, 30.472881], [104.009819, 30.47188], [104.009682, 30.470467], [104.005386, 30.469881], [104.007812, 30.469423], [104.008133, 30.466011], [104.007256, 30.465815], [104.008301, 30.465843], [104.008568, 30.467581], [104.009407, 30.467733], [104.009567, 30.46888], [104.010635, 30.469881], [104.010887, 30.471252], [104.011581, 30.471569], [104.011757, 30.472881], [104.01326, 30.474564], [104.018265, 30.474371], [104.019264, 30.473341], [104.023491, 30.473112], [104.023476, 30.471664], [104.021889, 30.470251], [104.021507, 30.468637], [104.020988, 30.468603], [104.020264, 30.469425], [104.018257, 30.469353], [104.017792, 30.468878], [104.017937, 30.467558], [104.019554, 30.467171], [104.019669, 30.465878], [104.018906, 30.465248], [104.018578, 30.463577], [104.017921, 30.46323], [104.017349, 30.461792], [104.016434, 30.461704], [104.015526, 30.46088], [104.016258, 30.4608], [104.01667, 30.460289], [104.01664, 30.459505], [104.015808, 30.459427], [104.015259, 30.460789], [104.014793, 30.459343], [104.012939, 30.458879], [104.015266, 30.458611], [104.015862, 30.45788], [104.014191, 30.455952], [104.013885, 30.45426], [104.013176, 30.453968], [104.012955, 30.45188], [104.013298, 30.45188], [104.013542, 30.4536], [104.014389, 30.453751], [104.015434, 30.454704], [104.015572, 30.455879], [104.016617, 30.456881], [104.016502, 30.45788], [104.0177, 30.458881], [104.01783, 30.460312], [104.018753, 30.460878], [104.018852, 30.462294], [104.020653, 30.463501], [104.020859, 30.46529], [104.021584, 30.465559], [104.022263, 30.466753], [104.026939, 30.471207], [104.027588, 30.471207], [104.028854, 30.469883], [104.028877, 30.468266], [104.028191, 30.467804], [104.028969, 30.467592], [104.029259, 30.466841], [104.030205, 30.466883], [104.02935, 30.466972], [104.029449, 30.468073], [104.029663, 30.469883], [104.030624, 30.470879], [104.030777, 30.47237], [104.036476, 30.472092], [104.036842, 30.470457], [104.037651, 30.469883], [104.036583, 30.468557], [104.034859, 30.46788], [104.035851, 30.466879], [104.035858, 30.465879], [104.03466, 30.46488], [104.034256, 30.46246], [104.03627, 30.463572], [104.041611, 30.463531], [104.041801, 30.46434], [104.042633, 30.464512], [104.042839, 30.465881], [104.043671, 30.466473], [104.043892, 30.467878], [104.044701, 30.468445], [104.04493, 30.469215], [104.046715, 30.469427], [104.049263, 30.472149], [104.051491, 30.472115], [104.051262, 30.471684], [104.049667, 30.471478], [104.049438, 30.469709], [104.047699, 30.469448], [104.047409, 30.468735], [104.043755, 30.465384], [104.043434, 30.463709], [104.040466, 30.460688], [104.036819, 30.460321], [104.036629, 30.45788], [104.037643, 30.456882], [104.037865, 30.455481], [104.038689, 30.45488], [104.038628, 30.451525], [104.037262, 30.45142], [104.036263, 30.450241], [104.033707, 30.450319], [104.033264, 30.451815], [104.032875, 30.450274], [104.032265, 30.450054], [104.031525, 30.450136], [104.031265, 30.45097], [104.029694, 30.45088], [104.031158, 30.450775], [104.031219, 30.449839], [104.03727, 30.44969], [104.038269, 30.449066], [104.03875, 30.450399], [104.03978, 30.450396], [104.041664, 30.448273], [104.041634, 30.447512], [104.039734, 30.44541], [104.038261, 30.445103], [104.038002, 30.444149], [104.037048, 30.44388], [104.038261, 30.443398], [104.038902, 30.444246], [104.040451, 30.444693], [104.041878, 30.446272], [104.043602, 30.446222], [104.043961, 30.444578], [104.045654, 30.443272], [104.046028, 30.441637], [104.046944, 30.44088], [104.046265, 30.440111], [104.045174, 30.439976], [104.045128, 30.439014], [104.044037, 30.438881], [104.045265, 30.438604], [104.045563, 30.439587], [104.047752, 30.439365], [104.048271, 30.4368], [104.050262, 30.434753], [104.051262, 30.43531], [104.064461, 30.435072], [104.064499, 30.427637], [104.05426, 30.427311], [104.053825, 30.42688], [104.05426, 30.426449], [104.064262, 30.426239], [104.064629, 30.425882], [104.064552, 30.423594], [104.053261, 30.423187], [104.052528, 30.423878], [104.052261, 30.428478], [104.051994, 30.423878], [104.051399, 30.42288], [104.052719, 30.422338], [104.052864, 30.419878], [104.055771, 30.41688], [104.054932, 30.415878], [104.055099, 30.410879], [104.056007, 30.410622], [104.056313, 30.408825], [104.057114, 30.408878], [104.056328, 30.408945], [104.056381, 30.410883], [104.055595, 30.411215], [104.055374, 30.414881], [104.055489, 30.415646], [104.056618, 30.41588], [104.056931, 30.417212], [104.062263, 30.417286], [104.06427, 30.418257], [104.067261, 30.418219], [104.068497, 30.417109], [104.069031, 30.415648], [104.068672, 30.410881], [104.06826, 30.410439], [104.066261, 30.410379], [104.065804, 30.40888], [104.068733, 30.40588], [104.068687, 30.40246], [104.06823, 30.400881], [104.067108, 30.399881], [104.067261, 30.399195], [104.06826, 30.399261], [104.06855, 30.39888], [104.068176, 30.397881], [104.068962, 30.396881], [104.068687, 30.39588], [104.06926, 30.391062], [104.069931, 30.40188], [104.069649, 30.407881], [104.070259, 30.408699], [104.07412, 30.40888], [104.070351, 30.409966], [104.070023, 30.413881], [104.07058, 30.414568], [104.071007, 30.41713], [104.072273, 30.418283], [104.074265, 30.418306], [104.075264, 30.417862], [104.076263, 30.418343], [104.080261, 30.418421], [104.080833, 30.419306], [104.082535, 30.419607], [104.085426, 30.422714], [104.085564, 30.423878], [104.086494, 30.42465], [104.086876, 30.426275], [104.087555, 30.426601], [104.087914, 30.428234], [104.088585, 30.428562], [104.089264, 30.429817], [104.089828, 30.429878], [104.089958, 30.431185], [104.091263, 30.432308], [104.092575, 30.432192], [104.093262, 30.431376], [104.095673, 30.431292], [104.097054, 30.42988], [104.097885, 30.427504], [104.098862, 30.426479], [104.100571, 30.425879], [104.100266, 30.42346], [104.097267, 30.423107], [104.096519, 30.424139], [104.095985, 30.424158], [104.095535, 30.422878], [104.095818, 30.420881], [104.095055, 30.420082], [104.095039, 30.41888], [104.095963, 30.418575], [104.096184, 30.41688], [104.095947, 30.416203], [104.094185, 30.415955], [104.094009, 30.415628], [104.095695, 30.415316], [104.096085, 30.413704], [104.097084, 30.412878], [104.096901, 30.412241], [104.09494, 30.41188], [104.09726, 30.411005], [104.09761, 30.41153], [104.098259, 30.411625], [104.100609, 30.411222], [104.101074, 30.407682], [104.10183, 30.40588], [104.10202, 30.399879], [104.103065, 30.398882], [104.103256, 30.395823], [104.103424, 30.399729], [104.102562, 30.400181], [104.10244, 30.400881], [104.102798, 30.410883], [104.101906, 30.41188], [104.102127, 30.413877], [104.102524, 30.415621], [104.104759, 30.415878], [104.105553, 30.416586], [104.106071, 30.420073], [104.108261, 30.420387], [104.10878, 30.421366], [104.11026, 30.421301], [104.110733, 30.420879], [104.11084, 30.41888], [104.110001, 30.417879], [104.111259, 30.416588], [104.11293, 30.416546], [104.113258, 30.415483], [104.113411, 30.416882], [104.112518, 30.417881], [104.112762, 30.41988], [104.113258, 30.420341], [104.114273, 30.419374], [104.115608, 30.41923], [104.116264, 30.418421], [104.117645, 30.418262], [104.118263, 30.417471], [104.11969, 30.417307], [104.121262, 30.415613], [104.122849, 30.41547], [104.12326, 30.414724], [104.125107, 30.414734], [104.125237, 30.413858], [104.125992, 30.413879], [104.12532, 30.413942], [104.125305, 30.414928], [104.123589, 30.415205], [104.123398, 30.416012], [104.12178, 30.416397], [104.120491, 30.418114], [104.119263, 30.418266], [104.118538, 30.419159], [104.117264, 30.419329], [104.116577, 30.420195], [104.114944, 30.420551], [104.114899, 30.421253], [104.116394, 30.421881], [104.116302, 30.422911], [104.115379, 30.423985], [104.114761, 30.423384], [104.111938, 30.42256], [104.111465, 30.423882], [104.111603, 30.427217], [104.109261, 30.427422], [104.108261, 30.42647], [104.107025, 30.426641], [104.106041, 30.427656], [104.105621, 30.429241], [104.104057, 30.430679], [104.103569, 30.432188], [104.102051, 30.433668], [104.101768, 30.435373], [104.101105, 30.435711], [104.099052, 30.439672], [104.099022, 30.441124], [104.10067, 30.442478], [104.101036, 30.444113], [104.102264, 30.44521], [104.107262, 30.445305], [104.108269, 30.444338], [104.115746, 30.444355], [104.118301, 30.44191], [104.118889, 30.440504], [104.11956, 30.440174], [104.119904, 30.438519], [104.120735, 30.437881], [104.120773, 30.435881], [104.121788, 30.434879], [104.121956, 30.433578], [104.122826, 30.43288], [104.123024, 30.42588], [104.123825, 30.425444], [104.124168, 30.42378], [104.125031, 30.423651], [104.125267, 30.421324], [104.125374, 30.42388], [104.124565, 30.424179], [104.124489, 30.42588], [104.123512, 30.426132], [104.123413, 30.42688], [104.123695, 30.43388], [104.122902, 30.434517], [104.122749, 30.435883], [104.121529, 30.436882], [104.121788, 30.438881], [104.120956, 30.439575], [104.120819, 30.440882], [104.11998, 30.441593], [104.119576, 30.442881], [104.120659, 30.444483], [104.121254, 30.444693], [104.122665, 30.444477], [104.126534, 30.44488], [104.121262, 30.445326], [104.119965, 30.446577], [104.119965, 30.45788], [104.11911, 30.458879], [104.118759, 30.461378], [104.118065, 30.46188], [104.117996, 30.463879], [104.116104, 30.465715], [104.11602, 30.466883], [104.115013, 30.467878], [104.115028, 30.469881], [104.113983, 30.470881], [104.114136, 30.480011], [104.11541, 30.480019], [104.115685, 30.4793], [104.116257, 30.479088], [104.120262, 30.479101], [104.121262, 30.478109], [104.125259, 30.478127], [104.126266, 30.477137], [104.130455, 30.477068], [104.130486, 30.475664], [104.129616, 30.47488], [104.129654, 30.472881], [104.130264, 30.472273], [104.131668, 30.472483], [104.131668, 30.473278], [104.130905, 30.473879], [104.131721, 30.474434], [104.132271, 30.476168], [104.135262, 30.476187], [104.136253, 30.475206], [104.139503, 30.475122], [104.142616, 30.472235], [104.143074, 30.46888], [104.144127, 30.468744], [104.144264, 30.467859], [104.144363, 30.468781], [104.143639, 30.469252], [104.143555, 30.469879], [104.143738, 30.472879], [104.142937, 30.473545], [104.142845, 30.474306], [104.147263, 30.474314], [104.148262, 30.473345], [104.149597, 30.473217], [104.150261, 30.471479], [104.150887, 30.472263], [104.151642, 30.472258], [104.151947, 30.470881], [104.151093, 30.469883], [104.15126, 30.467655], [104.151619, 30.469524], [104.153282, 30.469858], [104.15316, 30.470881], [104.153938, 30.4722], [104.154587, 30.472208], [104.155258, 30.470705], [104.155739, 30.471405], [104.157333, 30.471815], [104.157745, 30.472397], [104.159416, 30.472727], [104.159676, 30.473473], [104.161339, 30.47381], [104.1614, 30.474743], [104.162308, 30.47493], [104.162262, 30.47522], [104.162209, 30.474936], [104.161263, 30.474949], [104.161156, 30.473991], [104.15918, 30.473965], [104.158928, 30.473223], [104.155258, 30.473269], [104.154503, 30.474117], [104.150261, 30.474396], [104.148727, 30.475348], [104.145264, 30.475473], [104.143257, 30.476498], [104.13826, 30.476683], [104.137253, 30.477571], [104.133263, 30.477608], [104.132256, 30.478592], [104.127258, 30.478561], [104.126259, 30.47963], [104.122261, 30.47953], [104.121262, 30.480654], [104.117264, 30.480671], [104.116852, 30.481466], [104.116264, 30.481672], [104.114128, 30.48175], [104.114037, 30.488878], [104.115265, 30.489138], [104.115791, 30.487398], [104.116791, 30.486406], [104.118469, 30.486088], [104.11927, 30.485201], [104.122269, 30.485241], [104.123268, 30.484264], [104.125839, 30.484304], [104.12664, 30.484501], [104.127258, 30.485342], [104.128265, 30.485371], [104.129265, 30.484428], [104.131706, 30.484318], [104.132118, 30.482731], [104.132904, 30.482513], [104.133263, 30.481173], [104.13369, 30.481882], [104.1325, 30.48411], [104.132591, 30.487881], [104.13224, 30.487881], [104.131989, 30.485878], [104.131271, 30.48527], [104.130554, 30.486162], [104.129265, 30.486362], [104.125763, 30.48638], [104.125259, 30.485466], [104.124008, 30.485622], [104.12426, 30.486345], [104.125763, 30.48638], [104.125259, 30.488699], [104.124641, 30.487501], [104.12326, 30.487432], [104.122269, 30.486521], [104.120262, 30.486549], [104.119728, 30.487339], [104.117973, 30.487881], [104.118263, 30.488178], [104.121262, 30.48822], [104.122253, 30.489246], [104.123665, 30.489475], [104.12397, 30.491173], [104.124794, 30.49188], [104.124886, 30.495262], [104.12661, 30.495226], [104.128265, 30.49325], [104.129265, 30.492739], [104.130478, 30.492882], [104.129646, 30.493256], [104.129501, 30.494116], [104.127747, 30.49588], [104.128586, 30.496559], [104.128731, 30.497343], [104.123993, 30.497612], [104.123932, 30.500214], [104.125267, 30.500481], [104.126259, 30.499569], [104.127983, 30.499598], [104.128807, 30.497423], [104.129562, 30.497585], [104.130264, 30.498512], [104.133987, 30.49888], [104.13343, 30.499048], [104.133255, 30.500563], [104.133049, 30.500093], [104.131256, 30.500153], [104.130264, 30.49925], [104.127266, 30.500124], [104.12648, 30.501101], [104.124893, 30.501509], [104.124863, 30.502277], [104.126465, 30.502674], [104.126678, 30.504461], [104.128281, 30.504875], [104.126259, 30.505096], [104.125717, 30.503428], [104.124008, 30.503139], [104.12381, 30.501881], [104.122765, 30.500879], [104.12252, 30.497623], [104.121254, 30.49752], [104.120499, 30.496647], [104.11927, 30.496553], [104.118477, 30.49567], [104.117271, 30.495581], [104.116455, 30.494688], [104.115273, 30.494602], [104.11409, 30.493706], [104.113991, 30.49688], [104.113068, 30.497696], [104.112968, 30.49988], [104.111961, 30.500879], [104.111946, 30.50288], [104.110947, 30.50388], [104.110909, 30.507881], [104.109909, 30.508881], [104.110077, 30.525055], [104.112259, 30.525167], [104.113258, 30.524181], [104.116508, 30.524115], [104.116898, 30.522514], [104.119713, 30.519882], [104.120262, 30.513586], [104.120857, 30.521879], [104.119026, 30.523636], [104.119263, 30.524227], [104.12027, 30.52424], [104.121254, 30.52326], [104.122536, 30.523155], [104.123909, 30.521523], [104.125603, 30.521217], [104.126259, 30.520403], [104.127258, 30.521441], [104.132736, 30.521881], [104.133316, 30.522881], [104.130264, 30.523108], [104.129265, 30.52223], [104.125259, 30.522402], [104.123978, 30.523594], [104.12426, 30.52429], [104.134262, 30.524487], [104.139259, 30.523739], [104.139633, 30.524511], [104.140259, 30.524715], [104.141068, 30.524687], [104.141258, 30.523829], [104.142601, 30.523882], [104.141365, 30.523983], [104.141258, 30.525394], [104.14109, 30.525049], [104.140259, 30.525043], [104.117264, 30.525551], [104.116272, 30.526455], [104.110077, 30.526699], [104.109871, 30.53788], [104.108856, 30.538881], [104.108818, 30.54088], [104.108055, 30.54188], [104.108757, 30.542881], [104.108711, 30.544331], [104.106903, 30.544521], [104.106674, 30.545881], [104.107262, 30.54657], [104.107758, 30.546373], [104.108704, 30.545315], [104.108826, 30.544443], [104.109543, 30.544603], [104.11026, 30.545568], [104.111259, 30.544697], [104.113594, 30.54488], [104.111641, 30.545261], [104.111259, 30.546612], [104.11026, 30.54619], [104.10878, 30.546398], [104.108475, 30.547665], [104.109566, 30.54788], [104.108261, 30.547974], [104.107262, 30.54719], [104.106834, 30.547447], [104.105614, 30.548878], [104.105255, 30.553345], [104.105026, 30.547123], [104.102264, 30.546881], [104.101303, 30.546915], [104.100266, 30.5481], [104.099251, 30.548525], [104.098259, 30.548134], [104.097649, 30.54888], [104.099358, 30.549881], [104.096779, 30.550398], [104.096268, 30.553629], [104.095261, 30.553335], [104.094116, 30.553734], [104.093529, 30.554882], [104.093193, 30.554943], [104.092987, 30.553881], [104.092262, 30.553345], [104.091072, 30.553881], [104.091103, 30.554882], [104.090477, 30.555096], [104.089828, 30.554317], [104.088264, 30.554283], [104.087624, 30.553518], [104.086945, 30.553553], [104.085953, 30.555185], [104.086716, 30.555882], [104.086838, 30.557314], [104.088226, 30.55788], [104.088913, 30.560524], [104.088867, 30.560881], [104.088188, 30.560951], [104.08802, 30.560131], [104.087265, 30.560129], [104.086815, 30.560429], [104.086838, 30.561306], [104.089264, 30.563604], [104.091049, 30.563667], [104.091263, 30.563044], [104.091438, 30.563709], [104.091263, 30.564034], [104.089264, 30.564157], [104.088509, 30.56488], [104.0886, 30.565542], [104.089394, 30.56588], [104.089264, 30.567165], [104.089027, 30.56612], [104.088158, 30.565983], [104.087692, 30.564459], [104.083961, 30.564577], [104.083748, 30.56588], [104.084686, 30.566879], [104.084587, 30.56888], [104.085579, 30.569878], [104.085266, 30.571653], [104.085052, 30.571087], [104.084167, 30.570883], [104.08387, 30.567881], [104.082817, 30.566879], [104.08255, 30.564589], [104.080261, 30.564434], [104.079262, 30.56348], [104.078827, 30.563881], [104.078735, 30.56588], [104.078262, 30.566353], [104.077789, 30.56588], [104.077682, 30.56288], [104.077057, 30.562666], [104.076897, 30.567881], [104.077225, 30.56888], [104.076668, 30.570288], [104.074265, 30.572332], [104.071938, 30.572557], [104.07077, 30.573883], [104.070763, 30.574883], [104.071983, 30.577166], [104.073257, 30.577534], [104.074226, 30.57688], [104.074257, 30.575869], [104.076263, 30.575523], [104.076546, 30.577881], [104.077309, 30.578928], [104.076263, 30.579166], [104.075256, 30.578283], [104.074265, 30.578321], [104.07373, 30.578878], [104.075569, 30.580881], [104.075256, 30.584284], [104.074265, 30.586979], [104.07373, 30.581417], [104.071259, 30.581289], [104.07058, 30.582199], [104.06926, 30.582407], [104.068756, 30.58288], [104.068382, 30.58688], [104.068863, 30.588881], [104.067932, 30.589882], [104.069504, 30.590879], [104.066261, 30.591331], [104.065704, 30.591881], [104.066101, 30.59388], [104.065506, 30.594881], [104.065567, 30.598576], [104.06633, 30.59882], [104.06633, 30.59981], [104.067268, 30.599884]]],
            "type": "Polygon"
        }
    }], "type": "FeatureCollection"
};

// alert(Dict);

//adding a GeoJSON polygon多边形 feature set
//borderJson
var border = L.geoJson(testJson, {
    style: borderStyle,
    // onEachFeature: function (feature, layer) {
    //     layer.bindPopup('Feature name: ' + feature.properties.NAME + '<br>' + 'Feature area: ' +feature.properties.area);
    // }
});


function highlightFeature(e) {
    var activefeature = e.target;  //access to activefeature that was hovered over through e.target

    activefeature.setStyle({
        weight: 3,
        color: '#666',
        dashArray: '',
        fillOpacity: 0.6
    });

    if (!L.Browser.ie && !L.Browser.opera) {
        activefeature.bringToFront();
    }
}

//function for resetting the highlight
function resetHighlight(e) {
    ciycle.resetStyle(e.target);
}

function zoomToFeature(e) {
    map.fitBounds(e.target.getBounds());
}

//to call these methods we need to add listeners to our features

function interactiveFunction(feature, layer) {
    layer.on({
        mouseover: highlightFeature,
        mouseout: resetHighlight,
        click: zoomToFeature
    });
    layer.bindPopup('This ciycle is area of ride time between ' + feature.properties.Name);

}

ciycle = L.geoJson(ciycleJson, {
    style: map4_ciycleStyle,
    onEachFeature: interactiveFunction
}).addTo(map);


border.addTo(map);


//
//---- layer control for base maps and feature layers
//

//the variable features lists layers that I want to control with the layer control
var features = {
    //"Marker 2": mark,
    "Salzburg": ciycle
}

//the legend uses the layer control with entries for the base maps and two of the layers we added
//in case either base maps or features are not used in the layer control, the respective element in the properties is null

// var legend = L.control.layers(baseMaps,features, {position:'bottomleft', collapsed:true}).addTo(map);




